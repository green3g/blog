<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <meta name="author" content="roemhildtg"> 
  <link rel="canonical" href="http://roemhildtg.github.io/2016/February/OGR Cheatsheet/"> 
  <link rel="shortcut icon" href="../../../img/favicon.ico">

  <title>OGR Cheatsheet - Thoughts and Ramblings</title>

  <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
  <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
  <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
  <link href="../../../css/base.css" rel="stylesheet">
  <link href="../../../css/cinder.css" rel="stylesheet">
  <link rel="stylesheet" href="../../../css/highlight.css">

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
  <script>
    WebFont.load({
      google: {
        families: ['Open Sans', 'PT Sans']
      }
    });
  </script>

  
</head>

<body>

  <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../../..">Thoughts and Ramblings</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">2015 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">January</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../2015/January/ArcMap Metadata Update/">ArcMap Metadata Update</a>
</li>

        
            
<li >
    <a href="../../../2015/January/Install Skype In OpenSUSE/">Install Skype In OpenSUSE</a>
</li>

        
            
<li >
    <a href="../../../2015/January/MP495 Install Linux/">MP495 Install Linux</a>
</li>

        
            
<li >
    <a href="../../../2015/January/Quick Media Center/">Quick Media Center</a>
</li>

        
            
<li >
    <a href="../../../2015/January/Sharepoint Scroll Bug/">Sharepoint Scroll Bug</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">2016 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">February</a>
    <ul class="dropdown-menu">
        
            
<li class="active">
    <a href="./">OGR Cheatsheet</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">January</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../January/ArcMap Advanced Label/">ArcMap Advanced Label</a>
</li>

        
            
<li >
    <a href="../../January/Long File Names/">Long File Names</a>
</li>

        
            
<li >
    <a href="../../January/Openlayers 3 Custom Projection/">Openlayers 3 Custom Projection</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Projects <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../Projects/CMV/">CMV</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../../../2015/January/Sharepoint Scroll Bug/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../../January/ArcMap Advanced Label/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="http://github.com/roemhildtg/blog">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

  <div class="container">
    
    <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#ogr2ogr-cheatsheet">OGR2OGR Cheatsheet</a></li>
        
            <li><a href="#postgis-to-shapefile">PostGIS to Shapefile</a></li>
        
            <li><a href="#cad-to-shapefile">CAD To Shapefile</a></li>
        
            <li><a href="#esri-geodatabase-to-postgis">Esri Geodatabase to PostGIS</a></li>
        
    
    </ul>
</div></div>
    <div class="col-md-9" role="main">

<h1 id="ogr2ogr-cheatsheet">OGR2OGR Cheatsheet</h1>
<p>OGR is an incredibly versitile utility for any GIS data transfer task and should probably be a tool in everyone who needs to work with different types of data. OGR2OGR takes countless parameters (hence the cheatsheet) but when used correctly it can be used to automate tasks that would take hours using other methods. These are all batch files, but they can be easily converted to linux or mac bash files. </p>
<h2 id="postgis-to-shapefile">PostGIS to Shapefile</h2>
<p>We'll start small. This one takes a single table and turns it into a shape file. Set the parameters and run. Easy enough.</p>
<pre><code class="batch">set host=&quot;192.168.0.1&quot;
set user=&quot;admin&quot;
set password=&quot;password&quot;
set dbname=&quot;gisdata&quot;
set table=&quot;table&quot;
set output=&quot;mydata.shp&quot;
ogr2ogr -f &quot;ESRI Shapefile&quot; %output% PG:&quot;host=%host% user=%user% dbname=%dbname% password=%password%&quot; &quot;%table%&quot;
</code></pre>

<h2 id="cad-to-shapefile">CAD To Shapefile</h2>
<p>This one is a little more exciting. It takes a cad file, and converts it into three shapefiles (points, lines, polygons). In order for this to work, it needs to have a dxf file input. To create a dxf from a dwg, AutoCad's Save As... menu can be used.</p>
<pre><code class="batch">set ogr_path=&quot;C:\OSGeo4W\bin\ogr2ogr&quot;
set dwg_path=%1
set output_path=%2

echo ---------------------------------
echo Starting script with parameters input filepath:%1 output filepath:%2_type.shp
echo ---------------------------------

%ogr_path% &quot;%output_path%_points.shp&quot; &quot;%dwg_path%&quot; -where &quot;ogr_geometry = 'POINT'&quot;
%ogr_path% &quot;%output_path%_lines.shp&quot; &quot;%dwg_path%&quot; -where &quot;ogr_geometry = 'LINESTRING'&quot;
%ogr_path% &quot;%output_path%_polygon.shp&quot; &quot;%dwg_path%&quot; -where &quot;ogr_geometry = 'POLYGON'&quot;
</code></pre>

<h2 id="esri-geodatabase-to-postgis">Esri Geodatabase to PostGIS</h2>
<p>This one I've found incredibly useful. It quickly transfers many layers from a Esri Geodatabase (In fact all layers), and places them into a schema in PostgreSQL. It can even reproject the database. Just set the parameters at the top and run the script.</p>
<pre><code class="batch">set default_gdb=C:/data.gdb
set default_schema=mydata
set default_host=192.168.0.1
set default_database=gisdata
set default_user=gis
set PGPASSWORD=gis
set default_projection=&quot;EPSG:3857&quot;
set ogr_path=&quot;C:\OSGeo4W\bin\ogr2ogr&quot;
set pg_path=&quot;C:\Program Files (x86)\PostgreSQL\9.4\bin\psql&quot;

echo Creating schema %schema%...
%pg_path% -h %default_host% --dbname=%default_database% --username=%default_user% --command=&quot;CREATE SCHEMA %schema%;&quot;
echo Transferring data...
%ogr_path% -f &quot;PostgreSQL&quot; PG:&quot;host=%default_host% dbname=%default_database% user=%default_user% active_schema=%schema%&quot; -progress -overwrite -lco OVERWRITE=YES -t_srs %default_projection% -skipfailures %gdb%
</code></pre></div>
    
    <div id="disqus_thread"></div>
    <script>
      /**
       *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
       *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
       */
      /*
      var disqus_config = function () {
          this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
          this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
      };
      */
      (function() { // DON'T EDIT BELOW THIS LINE
        var d = document,
          s = d.createElement('script');

        s.src = '//roemhildtg.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <script id="dsq-count-scr" src="//roemhildtg.disqus.com/count.js" async></script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>

  <footer class="col-md-12 text-center">
    <hr>
    <p>
      <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
  </footer>

  <script src="../../../js/jquery-1.10.2.min.js"></script>
  <script src="../../../js/bootstrap-3.0.3.min.js"></script>
  <script src="../../../js/highlight.pack.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
  <script>
    var base_url = '../../..';
  </script>
  <script data-main="../../../mkdocs/js/search.js" src="../../../mkdocs/js/require.js"></script>
  <script src="../../../js/base.js"></script>

  <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">
            <span aria-hidden="true">&times;</span>
            <span class="sr-only">Close</span>
          </button>
          <h4 class="modal-title" id="exampleModalLabel">Search</h4>
        </div>
        <div class="modal-body">
          <p>
            From here you can search these documents. Enter your search terms below.
          </p>
          <form role="form">
            <div class="form-group">
              <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
            </div>
          </form>
          <div id="mkdocs-search-results"></div>
        </div>
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>

  </body>

</html>
